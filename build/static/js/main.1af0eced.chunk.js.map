{"version":3,"sources":["Callback/loading.svg","App.js","Home/Home.js","Profile/Profile.js","constants.js","Ping/Ping.js","Callback/Callback.js","Auth/auth0-variables.js","history.js","routes.js","Auth/Auth.js","index.js"],"names":["module","exports","__webpack_require__","p","App","route","this","props","history","replace","concat","auth","login","logout","renewSession","localStorage","getItem","isAuthenticated","react_default","a","createElement","es","fluid","Header","Brand","href","bsStyle","className","onClick","goTo","bind","id","Component","Home","style","cursor","Profile","_this","setState","profile","_this$props$auth","userProfile","getProfile","err","state","firstName","lastName","header","glyph","email","JSON","stringify","API_URL","Ping","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","contracts","_this2","getAccessToken","headers","Authorization","axios","get","then","response","data","catch","error","message","map","contract","index","key","name","Callback","position","display","justifyContent","height","width","top","bottom","left","right","backgroundColor","src","loading","alt","AUTH_CONFIG","createHistory","Auth","handleAuthentication","getIdToken","encode","buffer","toString","verifier","crypto","randomBytes","setItem","challenge","createHash","update","digest","window","location","code","body","querystring","grant_type","client_id","code_verifier","redirect_uri","Content-Length","length","Content-Type","post","_ref","setSession","console","accessToken","idToken","authResult","access_token","removeItem","expiresAt","expires_in","Date","getTime","cb","token","userId","jwt","decode","sub","substring","routes","Router","Route","path","render","src_App_0","assign","src_Home_Home","src_Profile_Profile","Redirect","to","src_Ping_Ping","log","search","src_Callback_Callback","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.1af0eced.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.c5590569.svg\";","import React, { Component } from 'react';\nimport { Navbar, Button } from 'react-bootstrap';\nimport './App.css';\n\nclass App extends Component {\n  goTo(route) {\n    this.props.history.replace(`/${route}`)\n  }\n\n  login() {\n    this.props.auth.login();\n  }\n\n  logout() {\n    this.props.auth.logout();\n  }\n\n  componentDidMount() {\n    const { renewSession } = this.props.auth;\n\n    if (localStorage.getItem('isLoggedIn') === 'true') {\n      renewSession();\n    }\n  }\n\n  render() {\n    const { isAuthenticated } = this.props.auth;\n\n    return (\n      <div>\n        <Navbar fluid>\n          <Navbar.Header>\n            <Navbar.Brand>\n              <a href=\"#\">Clause - API Sample</a>\n            </Navbar.Brand>\n            <Button\n              bsStyle=\"primary\"\n              className=\"btn-margin\"\n              onClick={this.goTo.bind(this, 'home')}\n            >\n              Home\n            </Button>\n            {\n              !isAuthenticated() && (\n                  <Button\n                    id=\"qsLoginBtn\"\n                    bsStyle=\"primary\"\n                    className=\"btn-margin\"\n                    onClick={this.login.bind(this)}\n                  >\n                    Log In\n                  </Button>\n                )\n            }\n            {\n              isAuthenticated() && (\n                  <Button\n                    bsStyle=\"primary\"\n                    className=\"btn-margin\"\n                    onClick={this.goTo.bind(this, 'profile')}\n                  >\n                    Profile\n                  </Button>\n                )\n            }\n            {\n              isAuthenticated() && (\n                  <Button\n                    bsStyle=\"primary\"\n                    className=\"btn-margin\"\n                    onClick={this.goTo.bind(this, 'ping')}\n                  >\n                    Contracts\n                  </Button>\n                )\n            }\n            {\n              isAuthenticated() && (\n                  <Button\n                    id=\"qsLogoutBtn\"\n                    bsStyle=\"primary\"\n                    className=\"btn-margin\"\n                    onClick={this.logout.bind(this)}\n                  >\n                    Log Out\n                  </Button>\n                )\n            }\n          </Navbar.Header>\n        </Navbar>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from 'react';\n\nclass Home extends Component {\n  login() {\n    this.props.auth.login();\n  }\n  render() {\n    const { isAuthenticated } = this.props.auth;\n    return (\n      <div className=\"container\">\n        {\n          isAuthenticated() && (\n              <h4>\n                You are logged in!\n              </h4>\n            )\n        }\n        {\n          !isAuthenticated() && (\n              <h4>\n                You are not logged in! Please{' '}\n                <a\n                  style={{ cursor: 'pointer' }}\n                  onClick={this.login.bind(this)}\n                >\n                  Log In\n                </a>\n                {' '}to continue.\n              </h4>\n            )\n        }\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import React, { Component } from 'react';\nimport { Panel, ControlLabel, Glyphicon } from 'react-bootstrap';\nimport './Profile.css';\n\nclass Profile extends Component {\n  componentWillMount() {\n    this.setState({ profile: {} });\n    const { userProfile, getProfile } = this.props.auth;\n    if (!userProfile) {\n      getProfile((err, profile) => {\n        this.setState({ profile });\n      });\n    } else {\n      this.setState({ profile: userProfile });\n    }\n  }\n  render() {\n    const { profile } = this.state;\n    return (\n      <div className=\"container\">\n        <div className=\"profile-area\">\n          <h1>{profile.firstName} {profile.lastName}</h1>\n          <Panel header=\"Profile\">\n            <div>\n              <ControlLabel><Glyphicon glyph=\"user\" /> Email</ControlLabel>\n              <h3>{profile.email}</h3>\n            </div>\n            <pre>{JSON.stringify(profile, null, 2)}</pre>\n          </Panel>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Profile;\n","export const API_URL = 'https://api.clause.io/v1';","import React, { Component } from 'react';\nimport { API_URL } from './../constants';\nimport axios from 'axios';\n\nclass Ping extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      contracts: [],\n    };\n  }\n  componentWillMount() {\n    const { getAccessToken } = this.props.auth;\n    const headers = { 'Authorization': `Bearer ${getAccessToken()}`}\n    axios.get(`${API_URL}/contracts/search`, { headers })\n      .then(response => this.setState({ contracts: response.data.contracts }))\n      .catch(error => this.setState({ message: error.message }));\n  }\n  render() {\n    const { isAuthenticated } = this.props.auth;\n    const { contracts } = this.state;\n    return (\n      <div className=\"container\">\n        <h2>Contracts</h2>\n        {\n          !isAuthenticated() &&\n            <p>Log in to list your contracts.</p>\n        }\n        {\n          isAuthenticated() && (\n            <ul>\n              { contracts.map((contract, index) => (\n                <li key={index}>\n                  <p>\n                    <a href={'https://hub.clause.io/contract/'+contract.id}>{contract.name}</a>\n                  </p>\n                </li>\n              ))}\n            </ul>\n            )\n        }\n      </div>\n    );\n  }\n}\n\nexport default Ping;\n","import React, { Component } from 'react';\nimport loading from './loading.svg';\n\nclass Callback extends Component {\n  render() {\n    const style = {\n      position: 'absolute',\n      display: 'flex',\n      justifyContent: 'center',\n      height: '100vh',\n      width: '100vw',\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      backgroundColor: 'white',\n    }\n\n    return (\n      <div style={style}>\n        <img src={loading} alt=\"loading\"/>\n      </div>\n    );\n  }\n}\n\nexport default Callback;","export const AUTH_CONFIG = {\n  domain: 'login.clause.io',\n  clientId: '0kpMKjPOVgBD0o7iUSvDVuqB1nt4vZE8',\n  callbackUrl: 'http://localhost:3000/callback',\n  apiUrl: 'https://api.clause.io'\n}\n","import createHistory from 'history/createBrowserHistory'\n\nexport default createHistory()","import React from 'react';\nimport { Redirect, Route, Router } from 'react-router-dom';\nimport App from './App';\nimport Home from './Home/Home';\nimport Profile from './Profile/Profile';\nimport Ping from './Ping/Ping';\nimport Callback from './Callback/Callback';\nimport Auth from './Auth/Auth';\nimport history from './history';\n\nconst auth = new Auth();\n\nconst handleAuthentication = ({location}) => {\n  console.log(location);\n  if (location.search.substring(0,6) === '?code=') {\n\n    auth.handleAuthentication(location.search.substring(6));\n  }\n}\n\nexport const makeMainRoutes = () => {\n  return (\n    <Router history={history}>\n        <div>\n          <Route path=\"/\" render={(props) => <App auth={auth} {...props} />} />\n          <Route path=\"/home\" render={(props) => <Home auth={auth} {...props} />} />\n          <Route path=\"/profile\" render={(props) => (\n            !auth.isAuthenticated() ? (\n              <Redirect to=\"/home\"/>\n            ) : (\n              <Profile auth={auth} {...props} />\n            )\n          )} />\n          <Route path=\"/ping\" render={(props) => (\n            !auth.isAuthenticated() ? (\n              <Redirect to=\"/home\"/>\n            ) : (\n              <Ping auth={auth} {...props} />\n            )\n          )} />\n          <Route path=\"/callback\" render={(props) => {\n            handleAuthentication(props);\n            return <Callback {...props} /> \n          }}/>        \n        </div>\n      </Router>\n  );\n}\n","import { AUTH_CONFIG } from './auth0-variables';\nimport { API_URL } from './../constants';\nimport history from '../history';\nimport crypto from 'crypto';\nimport axios from 'axios';\nimport querystring from 'querystring';\nimport jwt from 'jsonwebtoken';\n\nexport default class Auth {\n  accessToken;\n  idToken;\n  expiresAt;\n  userProfile;\n  verifier;\n\n  constructor() {\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n    this.handleAuthentication = this.handleAuthentication.bind(this);\n    this.isAuthenticated = this.isAuthenticated.bind(this);\n    this.getAccessToken = this.getAccessToken.bind(this);\n    this.getIdToken = this.getIdToken.bind(this);\n    this.renewSession = this.renewSession.bind(this);\n    this.getProfile = this.getProfile.bind(this);\n  }\n\n  login() {\n    const encode = buffer => buffer.toString('base64')\n      .replace(/\\+/g, '-')\n      .replace(/\\//g, '_')\n      .replace(/=/g, '');\n    const verifier = encode(crypto.randomBytes(32));\n    localStorage.setItem('verifier', verifier);\n\n    const challenge = encode(\n      crypto.createHash('sha256')\n        .update(verifier)\n        .digest()\n    );\n    \n    window.location = `https://${AUTH_CONFIG.domain}/authorize?audience=${AUTH_CONFIG.apiUrl}&scope=write:all&response_type=code&client_id=${AUTH_CONFIG.clientId}&redirect_uri=${AUTH_CONFIG.callbackUrl}&code_challenge=${challenge}&code_challenge_method=S256`;\n  }\n\n  handleAuthentication(code) {\n    const verifier = localStorage.getItem('verifier');\n\n    const body = querystring.stringify({\n      grant_type: 'authorization_code',\n      client_id: AUTH_CONFIG.clientId,\n      code_verifier: verifier,\n      code,\n      redirect_uri: AUTH_CONFIG.callbackUrl\n    });\n  \n    const headers = {\n      'Content-Length': body.length,\n      'Content-Type': 'application/x-www-form-urlencoded'\n    };\n    axios.post(`https://${AUTH_CONFIG.domain}/oauth/token`, body, {headers })\n      .then(({data}) => this.setSession(data))\n      .catch(error => console.error(error));\n  }\n\n  getAccessToken() {\n    return this.accessToken;\n  }\n\n  getIdToken() {\n    return this.idToken;\n  }\n\n  setSession(authResult) {\n    if (authResult && authResult.access_token) {\n        \n      // Set isLoggedIn flag in localStorage\n      localStorage.setItem('isLoggedIn', 'true');\n      localStorage.removeItem('verifier');\n\n      // Set the time that the access token will expire at\n      let expiresAt = (authResult.expires_in * 1000) + new Date().getTime();\n      this.accessToken = authResult.access_token;\n      this.expiresAt = expiresAt;\n\n      // navigate to the home route\n      history.replace('/home');\n    }\n  }\n\n  renewSession() {\n    // We cannot renew the session, so we should login again\n    localStorage.removeItem('isLoggedIn');\n  }\n\n  getProfile(cb) {\n    const token = this.getAccessToken();\n    const decoded = jwt.decode(token);\n    const userId = decoded.sub.substring(6); // Strip the prefix 'auth0|'\n\n    const headers = { 'Authorization': `Bearer ${token}`}\n    axios.get(`${API_URL}/users/${userId}/full`, { headers })\n      .then(response => {\n        this.userProfile = response.data;\n        cb(null, this.userProfile);\n      })\n      .catch(error => cb(error, null));\n  }\n\n  logout() {\n    // Remove tokens and expiry time\n    this.accessToken = null;\n    this.idToken = null;\n    this.expiresAt = 0;\n\n    // Remove user profile\n    this.userProfile = null;\n\n    // Remove isLoggedIn flag from localStorage\n    localStorage.removeItem('isLoggedIn');\n\n    window.location = `https://${AUTH_CONFIG.domain}/v2/logout`;\n  }\n\n  isAuthenticated() {\n    // Check whether the current time is past the\n    // access token's expiry time\n    let expiresAt = this.expiresAt;\n    return new Date().getTime() < expiresAt;\n  }\n}\n","import ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { makeMainRoutes } from './routes';\n\nconst routes = makeMainRoutes();\n\nReactDOM.render(\n  routes,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}